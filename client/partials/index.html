<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" />
    <link rel="stylesheet" href="static/style.css"/>
  </head>
  <body>

    <h2>Welcome to Speed of Sound {{loggedIn.name.first}}! <a href="#!/login"> login</a></h2><br>

    <h4>Search Song: <input type="text" ng-model=search><br></h4> 
    <!-- <ul>
      <li ng-repeat= 'song in songs | filter: search | orderBy: "-createdAt" | limitTo: 10 '>{{song.user.name}} - {{song.title}} - {{order.createdAt | date: "short"}}</li>
    </ul> -->


    <img ng-repeat='song in songs' ng-src ='{{song.imageUrl}}'>
        <a href="#!/upload"><h4>Upload new song</h4></a></br>

  <div class="container" ng-controller="SongController">
          <div class="row">
              <div class="col-md-12">

                  <h5>Songs</h5>
                  <ul>
                      <li ng-repeat="song in songs">
                          <button music-player="play" add-song="song">{{ song.title }}</button>
                          <button music-player add-song="song">+</button>
                      </li>
                  </ul>

                  <button play-all="songs">Play all</button>
                  <button play-all="songs" data-play="false">Add all</button>

              </div>
          </div>

          <hr />

          <div class="row">
              <div class="col-md-12">

                  <sound-manager></sound-manager>

                  <p>
                      Currently Playing: {{ currentPlaying.title }} by {{ currentPlaying.artist }} ({{ currentPostion }} / {{ currentDuration }})
                  </p>

                  <div class="seekBase" seek-track>
                      <div class="seekLoad" ng-style="{width : ( progress + '%' ) }"></div>
                  </div>
                  <br />
                  <button play-music>Play</button>
                  -
                  <button pause-music>Pause</button>
                  -
                  <button stop-music>Stop</button>
                  -
                  <button repeat-music>Repeat ({{ repeat }})</button>
                  -
                  <button play-pause-toggle data-play="Play!" data-pause="Pause!">Play Toggle</button>

                  Is Playing: {{ isPlaying }}
                  <br/>
                  <br/>Volume: {{ volume }} -
                  <button music-volume data-type="increase">+</button>
                  -
                  <button music-volume data-type="decrease">-</button>
                  -
                  <button mute-music>Mute ({{ mute }})</button>
                  <br/>
                  <br/>
                  <button prev-track>Prev Track</button>
                  -
                  <button next-track>Next Track</button>
                  -
                  <button clear-playlist>Clear Playlist</button>
                  <br/>
                  <br/>
                  <h5>Playlist</h5>
                  <ul>
                      <li ng-repeat="song in playlist">
                          <a play-from-playlist="song">{{ song.title }}</a>
                          -
                          <a remove-from-playlist="song" data-index="{{$index}}">
                              <small>(remove)</small>
                          </a>
                          <span ng-if="currentPlaying.id == song.id"> - (current)</span>
                      </li>
                  </ul>
              </div>
          </div>
      </div>
  </body>
</html>
